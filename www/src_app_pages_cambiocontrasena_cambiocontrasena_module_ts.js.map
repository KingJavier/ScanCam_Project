{"version":3,"file":"src_app_pages_cambiocontrasena_cambiocontrasena_module_ts.js","mappings":"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","sources":["./src/app/pages/cambiocontrasena/cambiocontrasena-routing.module.ts","./src/app/pages/cambiocontrasena/cambiocontrasena.module.ts","./src/app/pages/cambiocontrasena/cambiocontrasena.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CambiocontrasenaPage } from './cambiocontrasena.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CambiocontrasenaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CambiocontrasenaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CambiocontrasenaPageRoutingModule } from './cambiocontrasena-routing.module';\r\n\r\nimport { CambiocontrasenaPage } from './cambiocontrasena.page';\r\n\r\nimport { ErrorTailorModule } from '@ngneat/error-tailor';\r\n\r\n@NgModule({\r\n  imports: [\r\n    //da la funcion de los formularios reactivos\r\n    ReactiveFormsModule,\r\n    ErrorTailorModule.forRoot({\r\n      errors: {\r\n        useValue: {\r\n          required: 'Debes llenar este campo',\r\n          minlength: ({ requiredLength, actualLength }) =>\r\n                      `Expect ${requiredLength} but got ${actualLength}`,\r\n          invalidAddress: error => `Address isn't valid`\r\n        }\r\n      }\r\n    }),\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CambiocontrasenaPageRoutingModule\r\n  ],\r\n  declarations: [CambiocontrasenaPage]\r\n})\r\nexport class CambiocontrasenaPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n//importacion del los servicios de la api\r\nimport { TaskService } from 'src/app/services/task.service';\r\n//importación de toastcontroller para formularios reactivos\r\nimport { ToastController } from '@ionic/angular';\r\n//importación de form group para formularios reactivos\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-cambiocontrasena',\r\n  templateUrl: './cambiocontrasena.page.html',\r\n  styleUrls: ['./cambiocontrasena.page.scss'],\r\n})\r\nexport class CambiocontrasenaPage implements OnInit {\r\n  //mostrar contraseña\r\n  showPassword = false;\r\n  passwordToggleIcon = 'eye';\r\n\r\n  constructor(\r\n    //se inyectan cambio de la contraseña\r\n    private cambio: TaskService,\r\n    //se inyecta el constructor de formularios\r\n    private builder: FormBuilder,\r\n    //se inyecta toastcontroller\r\n    public toastController: ToastController\r\n  ) { }\r\n\r\n  //función de aleta por caso de error\r\n  async errorl(mensaje, duracion) {\r\n    const toast = await this.toastController.create({\r\n      message: mensaje,\r\n      color: 'danger',\r\n      duration: duracion\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async chec(mensaje, duracion) {\r\n    //función que hace el llamado de una alerta sobre un error\r\n    const toast = await this.toastController.create({\r\n      message: mensaje,\r\n      color: 'success',\r\n      duration: duracion,\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  //se llama los form group\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  form: FormGroup;\r\n\r\n  ngOnInit() {\r\n    //esta función hace los campos obligatorios\r\n    this.form = this.builder.group({\r\n      codigo: [null, Validators.required],\r\n      contrasena: [null, Validators.required],\r\n    });\r\n  }\r\n\r\n  public actucontrasena(codigo, contrasena){\r\n\r\n    if (this.form.invalid){\r\n      return Object.values(this.form.controls).forEach(control=>{\r\n        control.markAsTouched();\r\n      });\r\n    }\r\n\r\n    //esta funcion ejecuta el servicio de cambio de contraseña de la api\r\n    try{\r\n\r\n      //console.log(codigo);\r\n      //console.log(contrasena);\r\n      const datos={\r\n        newPass: contrasena,\r\n        resetCode: codigo,\r\n      };\r\n      this.cambio.cambiocontrasena(datos).subscribe((res: any)=>{\r\n        //console.log(res);\r\n\r\n        const correcto = res.msg;\r\n\r\n        if(correcto === 'Tu contraseña ha sido cambiada satisfactoriamente'){\r\n        this.chec('SE CAMBIO LA CONTRASEÑA SATISFACTORIAMENTE', 4000);\r\n        }\r\n\r\n      },error => {\r\n        console.log(error);\r\n\r\n        const err = error.error.msg;\r\n\r\n          if(err === 'USER_ALREADY_NOT_EXIST_WITH_THIS_CODE'){\r\n            this.errorl('CODIGO INVALIDO', 3000);\r\n          }\r\n      });\r\n\r\n    }\r\n    catch(e){\r\n      console.log('Error->', e);\r\n    }\r\n\r\n  }\r\n\r\n  togglePassword(): void{\r\n    this.showPassword = !this.showPassword;\r\n\r\n    if(this.passwordToggleIcon === 'eye'){\r\n      this.passwordToggleIcon = 'eye-off';\r\n    }else {\r\n      this.passwordToggleIcon = 'eye';\r\n    }\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}