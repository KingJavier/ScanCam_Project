{"version":3,"file":"src_app_pages_rolgest_estadisticas_estadisticas_module_ts.js","mappings":"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","sources":["./src/app/pages/rolgest/estadisticas/estadisticas-routing.module.ts","./src/app/pages/rolgest/estadisticas/estadisticas.module.ts","./src/app/pages/rolgest/estadisticas/estadisticas.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { EstadisticasPage } from './estadisticas.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EstadisticasPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class EstadisticasPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgChartsModule } from 'ng2-charts';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EstadisticasPageRoutingModule } from './estadisticas-routing.module';\r\n\r\nimport { EstadisticasPage } from './estadisticas.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    NgChartsModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    EstadisticasPageRoutingModule\r\n  ],\r\n  declarations: [EstadisticasPage]\r\n})\r\nexport class EstadisticasPageModule {}\r\n","import { AbstractType, Component, OnInit,  ViewChild } from '@angular/core';\r\n//importation de las rutas\r\nimport { Router } from '@angular/router';\r\n//importation de los servicios de la api\r\nimport { TaskService } from 'src/app/services/task.service';\r\n\r\nimport {Chart} from 'chart.js';\r\n//? Importation Sockets\r\nimport { Socket } from 'ngx-socket-io';\r\n\r\n@Component({\r\n  selector: 'app-estadisticas',\r\n  templateUrl: './estadisticas.page.html',\r\n  styleUrls: ['./estadisticas.page.scss'],\r\n})\r\nexport class EstadisticasPage implements OnInit {\r\n  //llamdo de los datos url y name como dato tipo string\r\n  url: string;\r\n  nombre: string;\r\n\r\n  entrada: any;\r\n  salida: any;\r\n\r\n  entrada2: any;\r\n  salida2: any;\r\n\r\n  myChart: any;\r\n  myChart2: any;\r\n\r\n  constructor(private router: Router,\r\n    private usuarioServicio: TaskService,\r\n    private socket: Socket,\r\n  ) {\r\n    //llamado del nombre del localstorage\r\n    this.nombre=localStorage.getItem('name');\r\n  }\r\n\r\n  ngOnInit() {\r\n    //llamado de la foto\r\n    //this.traerfotol();\r\n    //this.estadisticas();\r\n    this.traerregistros();\r\n  }\r\n\r\n  traerregistros(){\r\n    //funciÃ³n de tarer la foto de los servicios de la api\r\n    const token = localStorage.getItem('token');\r\n\r\n    this.usuarioServicio.numregentrada(token).subscribe((resp: any)=>{\r\n      console.log(resp);\r\n\r\n      this.entrada = resp;\r\n      this.entrada2 = resp;\r\n\r\n      this.usuarioServicio.numregsalida(token).subscribe((res: any)=>{\r\n        console.log(res);\r\n        this.salida = res;\r\n        this.salida2 = res;\r\n\r\n        this.estadisticas(this.entrada, this.salida);\r\n        this.especifico(this.entrada2, this.salida2);\r\n      });\r\n    });\r\n\r\n    this.socket.on('server:estadisticas', callback => {\r\n      //console.log(callback.regEntrada);\r\n\r\n      this.entrada = callback.regEntrada;\r\n      this.salida = callback.regSalida;\r\n\r\n      this.entrada2 = callback.regEntrada;\r\n      this.salida2 = callback.regSalida;\r\n\r\n      this.estadisticas(this.entrada, this.salida);\r\n      this.especifico(this.entrada2, this.salida2);\r\n    });\r\n  }\r\n\r\n  async estadisticas(entrada: any, salida: any){\r\n    const canvas = document.getElementById('estadistica') as HTMLCanvasElement;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    if (this.myChart) {\r\n      this.myChart.clear();\r\n      this.myChart.destroy();\r\n      // this.myChart = null;\r\n    }\r\n\r\n    const entradaTotal = entrada.total;\r\n    const salidaTotal = salida.total;\r\n    const dentroTotal = entrada.total-salida.total;\r\n\r\n    this.myChart = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n            labels: ['ENTRADA', 'SALIDA', 'ACTUALMENTE'],\r\n            datasets: [{\r\n                label: 'REGISTROS',\r\n                data: [entradaTotal, salidaTotal, dentroTotal],\r\n                backgroundColor: [\r\n                  'rgba(221,191,241, 0.4)',\r\n                  'rgba(218,243,241, 0.4)',\r\n                  'rgba(214,237,250, 0.4)',\r\n                ],\r\n                borderColor: [\r\n                  'rgba(149,112,244, 1)',\r\n                  'rgba(158,222,219, 1)',\r\n                  'rgba(127,180,217, 1)',\r\n                ],\r\n                hoverBackgroundColor: [\r\n                  'rgba(221,191,241, 0.7)',\r\n                  'rgba(218,243,241, 0.7)',\r\n                  'rgba(214,237,250, 0.7)',\r\n                ],\r\n                hoverBorderColor:[\r\n                  'rgba(149,112,244, 1)',\r\n                  'rgba(158,222,219, 1)',\r\n                  'rgba(127,180,217, 1)',\r\n                ],\r\n                borderWidth: 3,\r\n                borderRadius: 6,\r\n            }]\r\n        },\r\n        options: {\r\n            scales: {\r\n                y: {\r\n                    beginAtZero: true\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n  }\r\n\r\n  async especifico(entrada, salida){\r\n    const canvas = document.getElementById('especifico') as HTMLCanvasElement;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    if (this.myChart2) {\r\n      this.myChart2.clear();\r\n      this.myChart2.destroy();\r\n      // this.myChart = null;\r\n    }\r\n\r\n    const invitado = entrada.invitado-salida.invitado;\r\n    const aprendiz = entrada.aprendiz-salida.aprendiz;\r\n    const funcionario = entrada.funcioanrio-salida.funcioanrio;\r\n    const gestor = entrada.gestor-salida.gestor;\r\n    const seguridad = entrada.seguridad-salida.seguridad;\r\n\r\n    this.myChart2 = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n            labels: ['INVITADO', 'APRENDIZ', 'FUNCIONARIO', 'GESTOR', 'SEGURIDAD'],\r\n            datasets: [{\r\n                label: 'USUARIOS DENTRO DE LAS INSTALACIONES',\r\n                data: [ invitado, aprendiz, funcionario, gestor, seguridad ],\r\n                backgroundColor: [\r\n                  'rgba(254,237,216, 0.4)',\r\n                  'rgba(255,224,230, 0.4)',\r\n                  'rgba(221,191,241, 0.4)',\r\n                  'rgba(218,243,241, 0.4)',\r\n                  'rgba(214,237,250, 0.4)',\r\n                ],\r\n                borderColor: [\r\n                  'rgba(238,203,154, 1)',\r\n                  'rgba(233,180,189, 1)',\r\n                  'rgba(149,112,244, 1)',\r\n                  'rgba(158,222,219, 1)',\r\n                  'rgba(127,180,217, 1)',\r\n                ],\r\n                hoverBackgroundColor: [\r\n                  'rgba(254,237,216, 0.7)',\r\n                  'rgba(255,224,230, 0.7)',\r\n                  'rgba(221,191,241, 0.7)',\r\n                  'rgba(218,243,241, 0.7)',\r\n                  'rgba(214,237,250, 0.7)',\r\n                ],\r\n                hoverBorderColor:[\r\n                  'rgba(238,203,154, 1)',\r\n                  'rgba(233,180,189, 1)',\r\n                  'rgba(149,112,244, 1)',\r\n                  'rgba(158,222,219, 1)',\r\n                  'rgba(127,180,217, 1)',\r\n                ],\r\n                borderWidth: 3,\r\n                borderRadius: 6,\r\n            }]\r\n        },\r\n        options: {\r\n            scales: {\r\n                y: {\r\n                    beginAtZero: true\r\n                }\r\n            }\r\n        }\r\n    });\r\n  }\r\n\r\n\r\n  salir(){\r\n    //funciÃ³n de cerrar seciÃ³n\r\n    localStorage.clear();\r\n    this.router.navigate(['login']);\r\n  }\r\n\r\n\r\n  traerfotol(){\r\n    //funciÃ³n de tarer la foto de los servicios de la api\r\n    const token = localStorage.getItem('token');\r\n    const idImgPerfil = localStorage.getItem('idImgPerfil');\r\n\r\n    this.usuarioServicio.traerfotoperfil(token, idImgPerfil).subscribe((res: any)=>{\r\n      //console.log(res.data.url);\r\n      this.url = res.data.url;\r\n    });\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}